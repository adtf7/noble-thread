Error caught by errorHandler middleware: TypeError: C:\Users\adhil\OneDrive\Desktop\e-commerce application\views\user\home.ejs:127
    125|                     <div class="product__item">
    126|                         <div class="product__item__pic">
 >> 127|                             <a href="/product?id=<%= product[i]._id %>">
    128|                             <img src="<%= product[i].productImage[0] %>" alt="Product Image" style="width:100%; height:auto;">
    129|                            </a>
    130|                             <ul class="product__hover">

Cannot read properties of undefined (reading '_id')
    at eval (eval at compile (C:\Users\adhil\OneDrive\Desktop\e-commerce application\node_modules\ejs\lib\ejs.js:673:12), <anonymous>:18:37)      
    at home (C:\Users\adhil\OneDrive\Desktop\e-commerce application\node_modules\ejs\lib\ejs.js:703:17)
    at tryHandleCache (C:\Users\adhil\OneDrive\Desktop\e-commerce application\node_modules\ejs\lib\ejs.js:274:36)
    at exports.renderFile [as engine] (C:\Users\adhil\OneDrive\Desktop\e-commerce application\node_modules\ejs\lib\ejs.js:491:10)
    at View.render (C:\Users\adhil\OneDrive\Desktop\e-commerce application\node_modules\express\lib\view.js:135:8)
    at tryRender (C:\Users\adhil\OneDrive\Desktop\e-commerce application\node_modules\express\lib\application.js:657:10)
    at Function.render (C:\Users\adhil\OneDrive\Desktop\e-commerce application\node_modules\express\lib\application.js:609:3)
    at ServerResponse.render (C:\Users\adhil\OneDrive\Desktop\e-commerce application\node_modules\express\lib\response.js:1049:7)
    at loadHomePage (C:\Users\adhil\OneDrive\Desktop\e-commerce application\controllers\user\usercontroller.js:39:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  path: 'C:\\Users\\adhil\\OneDrive\\Desktop\\e-commerce application\\views\\user\\home.ejs'
}

<%- include('../../views/partials/user/header.ejs')%>
<style>
.product__color__select {
    display: flex;
    gap: 5px;
    margin-top: 8px;
}
.color-label {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    border: 1px solid #ddd;
    display: inline-block;
    cursor: pointer;
}
.color-label input {
    display: none;
}
</style>
    <!-- Hero Section Begin -->
    <section class="hero">
        <div class="hero__slider owl-carousel">
            <div class="hero__items set-bg" data-setbg="/img/title2.png">
                <div class="container">
                    <div class="row">
                        <div class="col-xl-5 col-lg-7 col-md-8">
                            <div class="hero__text">
                                <h6>Summer Collection</h6>
                                <h2>NFL T-Shirt</h2>
                                <p>NFL T-shirt with a contrast Kansas City Chiefs graphic, V-neck and short sleeves.</p>
                                <a href="#" class="primary-btn">Shop now <span class="arrow_right"></span></a>
                                <div class="hero__social">
                                    <a href="#"><i class="fa fa-facebook"></i></a>
                                    <a href="#"><i class="fa fa-twitter"></i></a>
                                    <a href="#"><i class="fa fa-pinterest"></i></a>
                                    <a href="#"><i class="fa fa-instagram"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="hero__items set-bg" data-setbg="/img/title1.png">
                <div class="container">
                    <div class="row">
                        <div class="col-xl-5 col-lg-7 col-md-8">
                            <div class="hero__text">
                                <h6>Summer Collection</h6>
                                <h2>Baggy cargo jeans</h2>
                                <p>Skater jeans with a five-pocket design, belt loops and zip fly and top button fastening. Made of cotton.
                                </p>
                                <a href="#" class="primary-btn">Shop now <span class="arrow_right"></span></a>
                                <div class="hero__social">
                                    <a href="#"><i class="fa fa-facebook"></i></a>
                                    <a href="#"><i class="fa fa-twitter"></i></a>
                                    <a href="#"><i class="fa fa-pinterest"></i></a>
                                    <a href="#"><i class="fa fa-instagram"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Hero Section End -->

    <!-- Banner Section Begin -->
    <section class="banner spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-7 offset-lg-4">
                    <div class="banner__item">
                        <div class="banner__item__pic">
                            <img src="/img/shirt1.png" alt="">
                        </div>
                        <div class="banner__item__text">
                            <h2>Shirt & Trouser Collection</h2>
                            <a href="/shop">Shop now</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-5">
                    <div class="banner__item banner__item--middle">
                        <div class="banner__item__pic">
                            <img src="/img/T-shirt1.webp" alt="">
                        </div>
                        <div class="banner__item__text">
                            <h2>T-Shirts</h2>
                            <a href="/shop">Shop now</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-7">
                    <div class="banner__item banner__item--last">
                        <div class="banner__item__pic">
                            <img src="/img/shoe1.png" alt="">
                        </div>
                        <div class="banner__item__text px-4">
                            <h2>Shoes Spring 2030</h2>
                            <a href="/shop">Shop now</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Banner Section End -->

    <!-- Product Section Begin -->
    <section class="product spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <ul class="filter__controls">
                    
                    <li data-filter=".hot-sales"class="active">Hot Sales</li>
                </ul>
            </div>
        </div>
        <div class="row"> <!-- ✅ Row wrapper -->
      <% if (product && product.length > 0) {
   product.forEach((p, i) => { %>
    <div class="col-lg-3 col-md-6 col-sm-6 mix hot-sales">
        <div class="product__item">
            <div class="product__item__pic">
                <a href="/product?id=<%= p._id %>">
                    <img src="<%= p.productImage[0] %>" alt="Product Image" style="width:100%; height:auto;">
                </a>
                <ul class="product__hover">
                    <li><a href="#"><img src="img/icon/heart.png" alt=""></a></li>
                    <li><a href="#"><img src="img/icon/compare.png" alt=""> <span>Compare</span></a></li>
                    <li><a href="#"><img src="img/icon/search.png" alt=""></a></li>
                </ul>
            </div>
            <div class="product__item__text">
                <h6><%= p.productName %></h6>
                <a href="#" class="add-cart"><%= p.productName %></a>
                <div class="rating">
                    <i class="fa fa-star-o"></i>
                    <i class="fa fa-star-o"></i>
                    <i class="fa fa-star-o"></i>
                    <i class="fa fa-star-o"></i>
                    <i class="fa fa-star-o"></i>
                </div>
                <h5>₹ <%= p.salePrice %></h5>
                <div class="product__color__select">
                    <label for="pc-<%= i %>" class="color-label" style="background-color: <%= p.color.toLowerCase() %>;">
                        <input type="radio" name="color-<%= i %>" id="pc-<%= i %>">
                    </label>
                </div>
            </div>
        </div>
    </div>
<% }) } else { %>
    <p>No products available.</p>
<% } %>


        </div>
            </div>
        </div>
    </section>
    <!-- Product Section End -->

  

    <!-- Instagram Section Begin -->
    <section class="instagram spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="instagram__pic">
                        <div class="instagram__pic__item set-bg" data-setbg="/img/insta1.png"></div>
                        <div class="instagram__pic__item set-bg" data-setbg="img/instagram/instagram-2.jpg"></div>
                        <div class="instagram__pic__item set-bg" data-setbg="img/instagram/instagram-3.jpg"></div>
                        <div class="instagram__pic__item set-bg" data-setbg="/img/insta2.jpg"></div>
                        <div class="instagram__pic__item set-bg" data-setbg="img/instagram/instagram-5.jpg"></div>
                        <div class="instagram__pic__item set-bg" data-setbg="img/instagram/instagram-6.jpg"></div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="instagram__text">
                        <h2>Instagram</h2>
                        <p>"Fashion is not necessarily about labels. It's not about brands. It's about something else that comes from within you." – Ralph Lauren</p>
                        <h3>#Male_Fashion</h3>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Instagram Section End -->

    <section class="latest spad">
        <div class="container">
            ----------------------------------------------------------------------------------------------------------------------------------------------------------------------
        </div>
    </section>
<script>
  document.addEventListener('DOMContentLoaded', function() {
        let product1 = document.getElementById('product-1');
        if (product1) {
            product1.onclick = function() {
                window.location.href = '/product-Ascot';
            };
        }
    });
</script>

    <%- include('../../views/partials/user/footer.ejs')%>